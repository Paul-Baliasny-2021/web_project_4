!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formElement=n}var t,r;return t=e,(r=[{key:"_showError",value:function(e){var t=this._settings,n=t.inputErrorClass,r=t.errorClass,o=this._formElement.querySelector("#".concat(e.id,"-error"));o.textContent=e.validationMessage,e.classList.add(n),o.classList.add(r)}},{key:"_hideError",value:function(e){this._formElement.querySelector("#".concat(e.id,"-error")).textContent="",e.classList.remove(this._settings.inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._settings.inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._settings.inactiveButtonClass),t.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)).forEach((function(t){e._hideError(t)}));var t=this._formElement.querySelector(this._settings.submitButtonSelector);t.classList.add(this._settings.inactiveButtonClass),t.disabled=!0}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(e){return e.preventDefault()}));var t=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),n=this._formElement.querySelector(this._settings.submitButtonSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r,e._settings),e._toggleButtonState(t,n,e._settings)}))}))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this,o=t.data,a=t.handleCardClick,u=t.handleDeleteCard,c=t.handleLikeButton;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_setEventListeners",(function(){r._place.querySelector(".place__image").addEventListener("click",(function(){return r._handleCardClick(r._name,r._link)})),r._place.querySelector(".place__delete").addEventListener("click",(function(){return r._handleDeleteCard(r._id)})),r._place.querySelector(".place__like").addEventListener("click",(function(){return r._handleLikeButton(r._id)}))})),i(this,"removeCard",(function(){r._place.remove()})),i(this,"createCardElement",(function(){r._place=r._templatePlace.cloneNode(!0);var e=r._place.querySelector(".place__title"),t=r._place.querySelector(".place__image");return e.textContent=r._name,t.style.backgroundImage="url(".concat(r._link,")"),r._setEventListeners(),r._ownerId!==r._userId&&(r._place.querySelector(".place__delete").style.visibility="hidden"),r._place.querySelector(".place__like-counter").textContent=r._likes.length,r.isLiked()&&r.activateLike(r._likes),r._place})),this._name=o.name,this._link=o.link,this._id=o._id,this._likes=o.likes,this._ownerId=o.owner._id,this._handleCardClick=a,this._handleDeleteCard=u,this._handleLikeButton=c,this._userId=n,this._templatePlace=document.querySelector("#place-template").content.querySelector(".place")}var t,n;return t=e,(n=[{key:"activateLike",value:function(e){this._likes=e,this._place.querySelector(".place__like-counter").textContent=this._likes.length,this._place.querySelector(".place__like").classList.toggle("place__like_active")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}}])&&o(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),c(this,"_closePopupOnRemoteClick",(function(e){e.target.classList.contains("popup")&&(n.close(),e.stopPropagation())})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_active"),document.addEventListener("keyup",this._handleEscClose),this._popupElement.addEventListener("click",this._closePopupOnRemoteClick)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_active"),document.removeEventListener("keyup",this._handleEscClose),this._popupElement.removeEventListener("click",this._closePopupOnRemoteClick)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__closer").addEventListener("click",(function(){return e.close()}))}}])&&u(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},y(e,t,n||e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=_(t);if(n){var o=_(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p(this,e)});function o(e){var t,n,i,a,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),u=function(e,r){var i=n._popupElement.querySelector(".popup__image"),a=n._popupElement.querySelector(".popup__image-title");i.src=r,i.alt=e,a.textContent=e,y((t=d(n),_(o.prototype)),"open",t).call(t)},(a="open")in(i=d(n=r.call(this,e)))?Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):i.open=u,n}return o}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},g(e,t,n||e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){n._submitButton.textContent=e?"Save":"Saving..."},(o="_renderSaving")in(r=E(n=i.call(this,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._handleFormSubmit=t,n._form=n._popupElement.querySelector(".popup__form"),n._submitButton=n._popupElement.querySelector(".popup__submit"),n}return t=a,(n=[{key:"_resetRenderSaving",value:function(){this._submitButton.textContent="Save"}},{key:"_getInputValues",value:function(){var e,t=this;return this._inputs=function(e){if(Array.isArray(e))return m(e)}(e=this._form.querySelectorAll(".popup__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputValues={},this._inputs.forEach((function(e){t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._renderSaving()})),g(w(a.prototype),"setEventListeners",this).call(this)}},{key:"open",value:function(){this._resetRenderSaving(),g(w(a.prototype),"open",this).call(this)}},{key:"close",value:function(){this._form.reset(),g(w(a.prototype),"close",this).call(this)}}])&&b(t.prototype,n),a}(l);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(n),this._profileJob=document.querySelector(r),this._profileImage=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{nameValue:this._profileName.textContent,jobValue:this._profileJob.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.profession,r=e.avatar;this._profileName.textContent=t,this._profileJob.textContent=n,this._profileImage.src=r}}])&&O(t.prototype,n),e}(),L=document.querySelector(".popup_type_picture"),q=(L.querySelector(".popup__image"),L.querySelector(".popup__image-title"),document.querySelector(".profile__edit-button")),P=document.querySelector(".profile__add-button"),I=document.querySelector(".profile__avatar-container"),R=(document.querySelector("#place-template").content.querySelector(".place"),document.querySelector(".popup__input_text_toponym"),document.querySelector(".popup__input_text_link"),document.querySelector(".popup__input_text_name")),A=document.querySelector(".popup__input_text_profession"),x=(document.querySelector(".profile__name"),document.querySelector(".profile__about"),document.querySelector(".popup__form")),U=document.querySelector(".popup__form_type_add"),B=U.querySelector(".popup__submit"),T=document.querySelector(".popup__form_type_avatar"),V=(document.querySelector(".place__delete"),{inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_theme_error",errorClass:"popup__error-message"}),D=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){return console.log(e)}))};function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return D("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"getUserInfo",value:function(){return D("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"editUserInfo",value:function(e){var t=e.name,n=e.profession;return D("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:n})})}},{key:"uploadUserAvatar",value:function(e){return D("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}},{key:"postNewCard",value:function(e){return D("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return D("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}},{key:"likeCard",value:function(e){return D("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"})}},{key:"dislikeCard",value:function(e){return D("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})}}])&&N(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"c1d6862e-d39d-4724-bab0-a07d7562f2a3","Content-Type":"application/json"}});function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},Y(e,t,n||e)}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function z(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(o){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function a(){var e;M(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q(G(e=i.call.apply(i,[this].concat(n))),"_renderSaving",(function(t){e._submitButton.textContent=t?"Yes":"Saving..."})),e}return t=a,(n=[{key:"setAction",value:function(e){this._handleFormSubmit=e}},{key:"_resetRenderSaving",value:function(){this._submitButton.textContent="Yes"}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()})),Y(K(a.prototype),"setEventListeners",this).call(this)}}])&&H(t.prototype,n),a}(C);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=new W(".popup_type_sure");Z.setEventListeners();var ee,te=new h(".popup_type_picture");te.setEventListeners(),Promise.all([J.getInitialCards(),J.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ee=i._id,ne.renderItems(o),re.setUserInfo({name:i.name,profession:i.about,avatar:i.avatar})}));var ne=new t({renderer:function(e){ae(e)}},".places"),re=new j({userNameSelector:".profile__name",userJobSelector:".profile__about",userAvatarSelector:".profile__image"}),oe=new C(".popup_type_edit",(function(e){J.editUserInfo(e).then((function(e){re.setUserInfo(e),oe.close()}))}));oe.setEventListeners(),q.addEventListener("click",(function(){var e=re.getUserInfo();oe.open(),ce.resetValidation(),R.value=e.nameValue,A.value=e.jobValue}));var ie=new C(".popup_type_avatar",(function(e){J.uploadUserAvatar(e).then((function(e){re.setUserInfo(e),ie.close()}))}));function ae(e){var t=new a({data:e,handleCardClick:function(e,t){te.open(e,t)},handleDeleteCard:function(e){Z.open(),Z.setAction((function(){J.deleteCard(e).then((function(e){t.removeCard(),Z.close()}))}))},handleLikeButton:function(e){t.isLiked()?J.dislikeCard(e).then((function(e){t.activateLike(e.likes)})):J.likeCard(e).then((function(e){t.activateLike(e.likes)}))}},ee),n=t.createCardElement();ne.addItem(n)}ie.setEventListeners(),I.addEventListener("click",(function(){ie.open(),se.resetValidation()}));var ue=new C(".popup_type_add",(function(e){J.postNewCard(e).then((function(e){ae(e),ue.close()}))}));P.addEventListener("click",(function(){ue.open(),le.resetValidation(),B.textContent="Create"})),ue.setEventListeners();var ce=new r(V,x),le=new r(V,U),se=new r(V,T);ce.enableValidation(),le.enableValidation(),se.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UThKLEVBQVUzRyxVQUc3QnlFLEVBQUlzQyxZQUFZbEssR0FDWGlILE1BQUssU0FBQUMsR0FDRjRDLEVBQVUxRyxhQUFhOEQsRUFBSTNELFVBR25DcUUsRUFBSXVDLFNBQVNuSyxHQUNSaUgsTUFBSyxTQUFBQyxHQUNGNEMsRUFBVTFHLGFBQWE4RCxFQUFJM0QsWUFJNUM1QixJQUNHeUksRUFBY04sRUFBVU8sb0JBQzlCbkIsR0FBU29CLFFBQVFGLEdBMUNyQlIsR0FBZ0JoQixvQkFFaEJ0QyxFQUFhakYsaUJBQWlCLFNBQVMsV0FDbkN1SSxHQUFnQkgsT0FDaEJjLEdBQXdCWixxQkF5QzVCLElBQU1hLEdBQWdCLElBQUk3RixFQUFjLG1CQUFtQixTQUFDL0MsR0FDeERnRyxFQUFJNkMsWUFBWTdJLEdBQ1hxRixNQUFLLFNBQUFDLEdBQ0ZvQyxHQUFXcEMsR0FDWHNELEdBQWN4RyxjQUkxQnFDLEVBQVVoRixpQkFBaUIsU0FBUyxXQUNoQ21KLEdBQWNmLE9BQ2RpQixHQUFzQmYsa0JBQ3RCaEQsRUFBc0IxRyxZQUFjLFlBR3hDdUssR0FBYzVCLG9CQUlkLElBQU1jLEdBQTJCLElBQUluSyxFQUFjQyxFQUFVaUgsR0FDdkRpRSxHQUF3QixJQUFJbkwsRUFBY0MsRUFBVWtILEdBQ3BENkQsR0FBMEIsSUFBSWhMLEVBQWNDLEVBQVVvSCxHQUU1RDhDLEdBQXlCaUIsbUJBQ3pCRCxHQUFzQkMsbUJBQ3RCSixHQUF3QkksbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmRfdXMtcHJvamVjdF84Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZF91cy1wcm9qZWN0XzgvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3VzLXByb2plY3RfOC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdXMtcHJvamVjdF84Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdXMtcHJvamVjdF84Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdXMtcHJvamVjdF84Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF91cy1wcm9qZWN0XzgvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZF91cy1wcm9qZWN0XzgvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3VzLXByb2plY3RfOC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL2Fyb3VuZF91cy1wcm9qZWN0XzgvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdXMtcHJvamVjdF84Ly4vc3JjL3BhZ2UvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB9XG5cbiAgICBfc2hvd0Vycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5nc1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2hpZGVFcnJvcihpbnB1dCkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0cykge1xuICAgICAgICByZXR1cm4gaW5wdXRzLnNvbWUoKGlucHV0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgZm9ybVN1Ym1pdEJ1dHRvbikge1xuXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRzKSkge1xuICAgICAgICAgICAgZm9ybVN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgZm9ybVN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtU3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICBmb3JtU3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xuICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGZvcm1TdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgZm9ybVN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICBmb3JtU3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgY29uc3QgZm9ybVN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCwgdGhpcy5fc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgZm9ybVN1Ym1pdEJ1dHRvbiwgdGhpcy5fc2V0dGluZ3MpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgfVxufVxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXRcIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXRfZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3RoZW1lX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3ItbWVzc2FnZVwiLFxufTtcblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9OyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlTGlrZUJ1dHRvbiB9LCB1c2VySWQpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlLXRlbXBsYXRlXCIpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZVwiKTtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBsYWNlQ2FyZEltYWdlID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9faW1hZ2VcIik7XG4gICAgICAgIHBsYWNlQ2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaykpO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX3BsYWNlLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2RlbGV0ZVwiKTtcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2lkKSk7XG5cbiAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX3BsYWNlLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2xpa2VcIik7XG4gICAgICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcy5faWQpKTtcbiAgICB9XG5cbiAgICByZW1vdmVDYXJkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9wbGFjZS5yZW1vdmUoKTtcbiAgICAgICAgLy8gdGhpcy5fcGxhY2UgPSBudWxsO1xuICAgIH07XG5cbiAgICBhY3RpdmF0ZUxpa2UobmV3TGlrZXMpIHtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcbiAgICAgICAgdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19saWtlXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJwbGFjZV9fbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgaXNMaWtlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKHN1cmZlcikgPT4gc3VyZmVyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICB9XG5cbiAgICBjcmVhdGVDYXJkRWxlbWVudCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fcGxhY2UgPSB0aGlzLl90ZW1wbGF0ZVBsYWNlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY29uc3QgcGxhY2VUaXRsZSA9IHRoaXMuX3BsYWNlLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX3RpdGxlXCIpO1xuICAgICAgICBjb25zdCBwbGFjZUltYWdlID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9faW1hZ2VcIik7XG4gICAgICAgIHBsYWNlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICBwbGFjZUltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19kZWxldGVcIikuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUxpa2UodGhpcy5fbGlrZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wbGFjZTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcilcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIF9jbG9zZVBvcHVwT25SZW1vdGVDbGljayA9IChldnQpID0+IHtcbiAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX2FjdGl2ZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlclwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIH1cbiAgICBvcGVuID0gKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgY29uc3QgcGxhY2VJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICAgICAgY29uc3QgcGxhY2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKTtcbiAgICAgICAgcGxhY2VJbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICBwbGFjZUltYWdlLmFsdCA9IG5hbWU7XG4gICAgICAgIHBsYWNlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdFwiKTtcbiAgICB9XG4gICAgX3JlbmRlclNhdmluZyA9IChpc1VwbG9hZGluZykgPT4ge1xuICAgICAgICBpZiAoaXNVcGxvYWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9yZXNldFJlbmRlclNhdmluZygpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XG4gICAgICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xuICAgIH07XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclNhdmluZygpO1xuXG4gICAgICAgIH0pXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRSZW5kZXJTYXZpbmcoKTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZVZhbHVlOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGpvYlZhbHVlOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBwcm9mZXNzaW9uLCBhdmF0YXIgfSkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBwcm9mZXNzaW9uO1xuICAgICAgICB0aGlzLl9wcm9maWxlSW1hZ2Uuc3JjID0gYXZhdGFyO1xuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgcGljdHVyZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3BpY3R1cmVcIik7XG5leHBvcnQgY29uc3QgcGljdHVyZVBvcHVwSW1hZ2UgPSBwaWN0dXJlUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcGljdHVyZVBvcHVwVGl0bGUgPSBwaWN0dXJlUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lclwiKTtcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZS10ZW1wbGF0ZVwiKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VcIik7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90ZXh0X3RvcG9ueW1cIik7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90ZXh0X2xpbmtcIik7XG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdGV4dF9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0Sm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdGV4dF9wcm9mZXNzaW9uXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0XCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZm9ybUFkZFBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtQWRkUGxhY2VTdWJtaXRCdG4gPSBmb3JtQWRkUGxhY2UucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0XCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2F2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZUNhcmRDb250YWluZXIgPSBcIi5wbGFjZXNcIjtcbmV4cG9ydCBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19kZWxldGVcIik7XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdF9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdGhlbWVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvci1tZXNzYWdlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRmV0Y2hUZW1wbGF0ZSA9ICh1cmwsIGhlYWRlcnMpID0+XG4gICAgZmV0Y2godXJsLCBoZWFkZXJzKVxuICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTsiLCJpbXBvcnQgeyBjcmVhdGVGZXRjaFRlbXBsYXRlIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVGZXRjaFRlbXBsYXRlKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgfTtcblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRmV0Y2hUZW1wbGF0ZShgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxuICAgIH07XG5cbiAgICBlZGl0VXNlckluZm8odXNlckRhdGEpIHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBwcm9mZXNzaW9uIH0gPSB1c2VyRGF0YTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZldGNoVGVtcGxhdGUoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBhYm91dDogcHJvZmVzc2lvbixcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdXBsb2FkVXNlckF2YXRhcihsaW5rKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVGZXRjaFRlbXBsYXRlKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGxpbmspXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHBvc3ROZXdDYXJkKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZldGNoVGVtcGxhdGUoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZldGNoVGVtcGxhdGUoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRmV0Y2hUZW1wbGF0ZShgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRmV0Y2hUZW1wbGF0ZShgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6ICdodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiYzFkNjg2MmUtZDM5ZC00NzI0LWJhYjAtYTA3ZDc1NjJmMmEzXCIsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH1cbn0pOyIsImltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cFdpdGhGb3JtIHtcbiAgICBzZXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XG4gICAgfVxuXG4gICAgX3JlbmRlclNhdmluZyA9IChpc1VwbG9hZGluZykgPT4ge1xuXG4gICAgICAgIGlmIChpc1VwbG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJZZXNcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVzZXRSZW5kZXJTYXZpbmcoKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICAgICAgfSlcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0FQSS5qc1wiXG5pbXBvcnQgeyBQb3B1cFdpdGhTdWJtaXQgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xuaW1wb3J0IHtcbiAgICBzZXR0aW5ncyxcbiAgICBlZGl0QnV0dG9uLFxuICAgIGFkZEJ1dHRvbixcbiAgICBhdmF0YXJCdXR0b24sXG4gICAgZm9ybUVkaXRQcm9maWxlLFxuICAgIGZvcm1BZGRQbGFjZSxcbiAgICBmb3JtQWRkUGxhY2VTdWJtaXRCdG4sXG4gICAgZm9ybUVkaXRBdmF0YXIsXG4gICAgaW5wdXROYW1lLFxuICAgIGlucHV0Sm9iLFxuICAgIHBsYWNlQ2FyZENvbnRhaW5lcixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vIENhcmQgRGVsZXRpb24gQ29uZmlybWF0aW9uIE1vZGFsXG5cbmNvbnN0IGNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoXCIucG9wdXBfdHlwZV9zdXJlXCIpXG5jb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4vLyBJbWFnZSBQcmV2aWV3IE1vZGFsXG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9waWN0dXJlXCIpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBJbml0aWFsIGNhcmRzIGFuZCB1c2VyIGluZm8gcmVuZGVyaW5nXG5cbmxldCB1c2VySWRcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxuICAgIC50aGVuKChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xuICAgICAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmREYXRhKTtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyRGF0YS5uYW1lLCBwcm9mZXNzaW9uOiB1c2VyRGF0YS5hYm91dCwgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIgfSk7XG4gICAgfSlcblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY3JlYXRlQ2FyZChkYXRhKVxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcGxhY2VDYXJkQ29udGFpbmVyXG4pO1xuXG5cbi8vIEVkaXQgUHJvZmlsZSBNb2RhbFxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICAgIHVzZXJKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fYWJvdXRcIixcbiAgICB1c2VyQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCJcbn0pXG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2VkaXRcIiwgKHVzZXJEYXRhKSA9PiB7XG4gICAgYXBpLmVkaXRVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICAgICAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKClcbiAgICAgICAgfSlcbn0pO1xuXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKVxuICAgIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xuICAgIGZvcm1FZGl0UHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBpbnB1dE5hbWUudmFsdWUgPSBkYXRhLm5hbWVWYWx1ZTtcbiAgICBpbnB1dEpvYi52YWx1ZSA9IGRhdGEuam9iVmFsdWU7XG59KTtcblxuLy8gVXBsb2FkIFVzZXIncyBBdmF0YXIgTW9kYWxcblxuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9hdmF0YXJcIiwgKGxpbmspID0+IHtcbiAgICBhcGkudXBsb2FkVXNlckF2YXRhcihsaW5rKVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpXG4gICAgICAgIH0pXG5cbn0pXG5cbmVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xuICAgIGZvcm1FZGl0QXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbi8vIEFkZCBOZXcgUGxhY2UgTW9kYWxcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgY29uc3QgcGxhY2VDYXJkID0gbmV3IENhcmQoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4obmFtZSwgbGluaylcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2FyZDogKGlkKSA9PiB7XG4gICAgICAgICAgICBjb25maXJtUG9wdXAub3BlbigpO1xuICAgICAgICAgICAgY29uZmlybVBvcHVwLnNldEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVMaWtlQnV0dG9uOiAoaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzQWxyZWFkeUxpa2VkID0gcGxhY2VDYXJkLmlzTGlrZWQoKTtcblxuICAgICAgICAgICAgaWYgKGlzQWxyZWFkeUxpa2VkKSB7XG4gICAgICAgICAgICAgICAgYXBpLmRpc2xpa2VDYXJkKGlkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VDYXJkLmFjdGl2YXRlTGlrZShyZXMubGlrZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcGkubGlrZUNhcmQoaWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUNhcmQuYWN0aXZhdGVMaWtlKHJlcy5saWtlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB1c2VySWQpO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcGxhY2VDYXJkLmNyZWF0ZUNhcmRFbGVtZW50KCk7XG4gICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG59O1xuXG5jb25zdCBhZGRQbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9hZGRcIiwgKGRhdGEpID0+IHtcbiAgICBhcGkucG9zdE5ld0NhcmQoZGF0YSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGNyZWF0ZUNhcmQocmVzKTtcbiAgICAgICAgICAgIGFkZFBsYWNlUG9wdXAuY2xvc2UoKVxuICAgICAgICB9KVxufSlcblxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgYWRkUGxhY2VQb3B1cC5vcGVuKCk7XG4gICAgZm9ybUFkZFBsYWNlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGZvcm1BZGRQbGFjZVN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiQ3JlYXRlXCI7XG59KTtcblxuYWRkUGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBGb3JtcyBWYWxpZGF0aW9uIGluaXRpYWxpemF0aW9uIFxuXG5jb25zdCBmb3JtRWRpdFByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVkaXRQcm9maWxlKTtcbmNvbnN0IGZvcm1BZGRQbGFjZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtQWRkUGxhY2UpO1xuY29uc3QgZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVkaXRBdmF0YXIpXG5cbmZvcm1FZGl0UHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtQWRkUGxhY2VWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJuYW1lcyI6WyJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsInRoaXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsImZvckVhY2giLCJpdGVtIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJpbnB1dCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvck1lc3NhZ2UiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJpbnB1dHMiLCJzb21lIiwiZm9ybVN1Ym1pdEJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIkNhcmQiLCJ1c2VySWQiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VCdXR0b24iLCJfcGxhY2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2lkIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfdGVtcGxhdGVQbGFjZSIsImNsb25lTm9kZSIsInBsYWNlVGl0bGUiLCJwbGFjZUltYWdlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfb3duZXJJZCIsIl91c2VySWQiLCJ2aXNpYmlsaXR5IiwiX2xpa2VzIiwibGVuZ3RoIiwiaXNMaWtlZCIsImFjdGl2YXRlTGlrZSIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJvd25lciIsImNvbnRlbnQiLCJuZXdMaWtlcyIsInRvZ2dsZSIsInN1cmZlciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJzdG9wUHJvcGFnYXRpb24iLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJpc1VwbG9hZGluZyIsIl9zdWJtaXRCdXR0b24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0cyIsIl9pbnB1dFZhbHVlcyIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiX3JlbmRlclNhdmluZyIsIl9yZXNldFJlbmRlclNhdmluZyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfcHJvZmlsZUltYWdlIiwibmFtZVZhbHVlIiwiam9iVmFsdWUiLCJwcm9mZXNzaW9uIiwiYXZhdGFyIiwicGljdHVyZVBvcHVwIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0Sm9iIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybUFkZFBsYWNlIiwiZm9ybUFkZFBsYWNlU3VibWl0QnRuIiwiZm9ybUVkaXRBdmF0YXIiLCJjcmVhdGVGZXRjaFRlbXBsYXRlIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInVzZXJEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJQb3B1cFdpdGhTdWJtaXQiLCJhY3Rpb24iLCJjb25maXJtUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsImltYWdlUG9wdXAiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImNhcmREYXRhIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjcmVhdGVDYXJkIiwiZWRpdFByb2ZpbGVQb3B1cCIsImVkaXRVc2VySW5mbyIsIm9wZW4iLCJmb3JtRWRpdFByb2ZpbGVWYWxpZGF0b3IiLCJyZXNldFZhbGlkYXRpb24iLCJlZGl0QXZhdGFyUG9wdXAiLCJ1cGxvYWRVc2VyQXZhdGFyIiwicGxhY2VDYXJkIiwic2V0QWN0aW9uIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJmb3JtRWRpdEF2YXRhclZhbGlkYXRvciIsImFkZFBsYWNlUG9wdXAiLCJwb3N0TmV3Q2FyZCIsImZvcm1BZGRQbGFjZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9